<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Система управления мероприятиями</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Сайдбар -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>Мероприятия</h2>
            </div>
            <div class="sidebar-content">
                <button class="sidebar-btn active" data-panel="events">
                    <img src="/public/img/events.png" alt="Мероприятия">
                    <span>Мероприятия</span>
                </button>
                <button class="sidebar-btn" data-panel="profile">
                    <img src="/public/img/profile.png" alt="Профиль">
                    <span>Профиль</span>
                </button>
                <!-- Кнопка "Проверка на скорые мероприятия" -->
                <button id="check-events-btn" class="sidebar-btn">
                    <img src="/public/img/holidays-party.png" alt="Проверка мероприятий">
                    <span>Проверка на скорые мероприятия</span>
                </button>
            </div>
        </div>

        <!-- Основной контент -->
        <div class="main-content">
            <!-- Header -->
            <header class="content-header">
                <h1 id="current-panel-title">Мероприятия</h1>
                <div class="header-actions">
                    <button id="add-event-btn" class="btn-primary">
                        <span>Добавить мероприятие</span>
                    </button>
                    <button id="edit-event-btn" class="btn-primary" disabled>
                        <span>Редактировать</span>
                    </button>
                </div>
            </header>

            <!-- Панель мероприятий -->
            <div id="events-panel" class="content-panel active">
                <div class="panel-toolbar">
                    <div class="search-container">
                        <img src="/img/search.png" alt="Поиск">
                        <input type="text" id="search-events" class="search-input" placeholder="Поиск мероприятий...">
                    </div>
                    <button id="refresh-btn" class="btn-secondary">Обновить данные</button>
                </div>
                <div class="table-container">
                    <table id="events-table" class="data-table">
                        <thead>
                            <tr>
                                <th data-sort="EventId">Код события</th>
                                <th data-sort="EventName">Название события</th>
                                <th data-sort="Description">Описание</th>
                                <th data-sort="DateTimeStart">Дата начала</th>
                                <th data-sort="DateTimeFinish">Дата окончания</th>
                                <th data-sort="CategoryName">Категория</th>
                                <th data-sort="VenueName">Место проведения</th>
                                <th data-sort="Status">Статус</th>
                                <th data-sort="EstimatedBudget">Предполагаемый бюджет</th>
                                <th data-sort="ActualBudget">Фактический бюджет</th>
                                <th data-sort="MaxNumOfGuests">Кол-во гостей</th>
                            </tr>
                        </thead>
                        <tbody id="events-tbody">
                            <!-- Данные будут загружены здесь -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Панель профиля -->
            <div id="profile-panel" class="content-panel">
                <div class="profile-content">
                    <h2>Личный кабинет</h2>
                    <p>Информация о пользователе...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно для добавления/редактирования мероприятия -->
    <div id="event-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Добавление мероприятия</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="event-form">
                    <div class="form-group">
                        <label for="EventName">Название мероприятия:</label>
                        <input type="text" id="EventName" name="EventName" required>
                    </div>
                    <div class="form-group">
                        <label for="Description">Описание:</label>
                        <textarea id="Description" name="Description"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="DateTimeStart">Дата начала:</label>
                            <input type="datetime-local" id="DateTimeStart" name="DateTimeStart" required>
                        </div>
                        <div class="form-group">
                            <label for="DateTimeFinish">Дата окончания:</label>
                            <input type="datetime-local" id="DateTimeFinish" name="DateTimeFinish" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="CategoryId">Категория:</label>
                            <select id="CategoryId" name="CategoryId" required>
                                <option value="">Загрузка...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="VenueId">Место проведения:</label>
                            <select id="VenueId" name="VenueId" required>
                                <option value="">Загрузка...</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="Status">Статус:</label>
                            <select id="Status" name="Status" required>
                                <option value="В обработке">В обработке</option>
                                <option value="Согласован">Согласован</option>
                                <option value="Отменен">Отменен</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="EstimatedBudget">Предполагаемый бюджет:</label>
                            <input type="number" id="EstimatedBudget" name="EstimatedBudget" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="MaxNumOfGuests">Максимальное количество гостей:</label>
                        <input type="number" id="MaxNumOfGuests" name="MaxNumOfGuests" required>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn-secondary modal-cancel">Отмена</button>
                        <button type="submit" class="btn-primary">Сохранить</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Модальное окно для обновления бюджета -->
    <div id="budget-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Обновление бюджета</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="budget-form">
                    <div class="form-group">
                        <label for="ActualBudget">Фактический бюджет:</label>
                        <input type="number" id="ActualBudget" name="ActualBudget" required>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn-secondary modal-cancel">Отмена</button>
                        <button type="submit" class="btn-primary">Обновить</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/events.js"></script>
    <script src="/js/app.js"></script>
</body>
</html>